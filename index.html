<!--
경고: 귀하가 무단 수집하려는 사이트의 핵심 데이터는 본 오픈소스에 포함되지 않습니다. 본 사이트의 무단 소스 코드 데이터 수집(크롤링, 스크래핑 등)행위는 서버 접근 로그에 기기의 IP와 함께 기록됩니다.
허용된 관리자 인터페이스를 제외한 IP가 데이터를 수집하는 행위는 적발 즉시 밴블리온 운영 정책에 따른 IP 유포와 유저 정보 공개 등 상응한 제재가 이루어질 수 있습니다.
-->

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>유피드 밴블리온</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #1c1c1c;
      color: #fff;
    }

    /* 헤더 */
    header {
      background-color: #003d80;
      color: white;
      padding: 11px 25px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header .logo {
      font-size: 19.8px;
      font-weight: bold;
    }

    header .auth-buttons a {
      color: white;
      text-decoration: none;
      margin-left: 15px;
      font-weight: bold;
      font-size: 15.4px;
      transition: color 0.3s;
      cursor: pointer;
    }

    header .auth-buttons a:hover {
      color: #ffcc00;
    }

    /* 공지 텍스트 박스 */
    .notice-box {
      width: 70%;
      margin: 15px auto 0 auto;
      text-align: left;
      font-size: 19.8px;
      font-weight: bold;
      color: #ffae42;
    }

    /* 슬라이더 */
    .slider {
      position: relative;
      width: 70%;
      margin: 10px auto;
      height: 275px;
      overflow: hidden;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }

    .slides {
      display: flex;
      width: 300%;
      height: 100%;
      transition: transform 0.6s ease-in-out;
    }

    .slides img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .dots {
      text-align: center;
      margin-top: 10px;
    }

    .dot {
      height: 10px;
      width: 10px;
      margin: 0 4px;
      background-color: #bbb;
      border-radius: 50%;
      display: inline-block;
      cursor: pointer;
    }

    .active {
      background-color: #003d80;
    }

    /* 커뮤니티 섹션 */
    .community-section {
      width: 70%;
      margin: 40px auto;
      display: flex;
      justify-content: space-between;
      gap: 20px;
    }

    .community-box {
      background-color: #242424;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
      width: auto;
      max-width: 50%;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    .community-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #ffae42;
    }

    .community-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .community-list li {
      margin: 10px 0;
    }

    .community-list a {
      color: #ddd;
      text-decoration: none;
      font-size: 16px;
      font-weight: normal;
      transition: color 0.3s;
    }

    .community-list a:hover {
      color: #ffae42;
    }

    /* 중앙 세션 */
    .middle-box {
      background-color: #242424;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
      padding: 20px;
      margin-top: 30px;
      flex: 1;
      text-align: center;
      display: flex;
      align-items: flex-start;
      justify-content: center;
    }

    .middle-box span {
      position: relative;
      top: -5px;
      font-size: 16px;
      color: #ddd;
    }

    /* 모달 공통 */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: #1c1c1c;
      padding: 20px;
      border-radius: 10px;
      color: white;
      width: 300px;
    }

    .modal-content h2 {
      margin-top: 0;
    }

    .modal-content input {
      width: 100%;
      margin: 5px 0;
      padding: 8px;
      border-radius: 5px;
      border: none;
    }

    .modal-content button {
      margin-top: 10px;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    .modal-close {
      float: right;
      cursor: pointer;
      font-size: 18px;
      margin-top: -5px;
    }
  </style>
</head>
<body>

  <!-- 헤더 -->
  <header>
    <div class="logo">BANBLE LEON</div>
    <div class="auth-buttons">
      <a onclick="openModal('loginModal')">로그인</a>
      <a onclick="openModal('signupModal')">회원가입</a>
      <a id="logoutBtn" style="display:none;cursor:pointer;">로그아웃</a>
      <!-- ✅ 로그인 후 사용자 이름 표시 영역 -->
      <span id="userName" style="margin-left:15px; font-weight:bold; color:#ffcc00; display:none;"></span>
    </div>
  </header>

  <!-- 공지 텍스트 박스 -->
  <div class="notice-box" style="font-size:15.4px;">
    오늘의 공지: 새로운 이벤트가 시작되었습니다!
  </div>

  <!-- 슬라이더 -->
  <div class="slider">
    <div class="slides">
      <img src="https://test-resize-image.wishbeen.co.kr/5e608143aa825c93a9dd78f8af521c74.jpg?w=790&q=80" alt="공지1">
      <img src="https://pimg.mk.co.kr/meet/neds/2020/11/image_readtop_2020_1182659_16055986074435325.jpg" alt="공지2">
      <img src="https://celcliptipsprod.s3-ap-northeast-1.amazonaws.com/tips_article_body/4c36/208331/7eb07261d46614eccf78b4ecdc7cd07a" alt="공지3">
    </div>
  </div>
  <div class="dots">
    <span class="dot active"></span>
    <span class="dot"></span>
    <span class="dot"></span>
  </div>

  <!-- 커뮤니티 섹션 -->
  <div class="community-section">
    <!-- 왼쪽 A~E -->
    <div class="community-box">
      <div class="community-title">왼쪽 커뮤니티</div>
      <ul class="community-list">
        <li><a href="#">커뮤니티 A</a></li>
        <li><a href="#">커뮤니티 B</a></li>
        <li><a href="#">커뮤니티 C</a></li>
        <li><a href="#">커뮤니티 D</a></li>
        <li><a href="#">커뮤니티 E</a></li>
      </ul>
    </div>

    <!-- 중앙 세션 -->
    <div class="middle-box">
      <span>중앙 세션 (추가 버튼 영역)</span>
    </div>

    <!-- 오른쪽 F~J -->
    <div class="community-box">
      <div class="community-title">오른쪽 커뮤니티</div>
      <ul class="community-list">
        <li><a href="#">커뮤니티 F</a></li>
        <li><a href="#">커뮤니티 G</a></li>
        <li><a href="#">커뮤니티 H</a></li>
        <li><a href="#">커뮤니티 I</a></li>
        <li><a href="#">커뮤니티 J</a></li>
      </ul>
    </div>
  </div>

  <!-- 로그인 모달 -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal('loginModal')">&times;</span>
      <h2>로그인</h2>
      <input type="email" id="loginEmail" placeholder="이메일">
      <input type="password" id="loginPass" placeholder="비밀번호">
      <button id="loginSubmit">로그인</button>
    </div>
  </div>

  <!-- 회원가입 모달 -->
  <div id="signupModal" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal('signupModal')">&times;</span>
      <h2>회원가입</h2>
      <input type="text" id="signupNickname" placeholder="닉네임">
      <input type="email" id="signupEmail" placeholder="이메일">
      <input type="password" id="signupPass" placeholder="비밀번호">
      <button id="signupSubmit">회원가입</button>
    </div>
  </div>

  <script type="module">
    // Firebase SDK import
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile } 
      from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBJZle3txhhthWgaIWTTHzrLl4bkJqQye4",
      authDomain: "fast-gateway-290809.firebaseapp.com",
      projectId: "fast-gateway-290809",
      storageBucket: "fast-gateway-290809.firebasestorage.app",
      messagingSenderId: "640433110514",
      appId: "1:640433110514:web:8fe4fafc9a987b6a4b3f6b",
      measurementId: "G-2V57XWX7CW"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // 모달 열고 닫기
    window.openModal = function(id) {
      document.getElementById(id).style.display = "flex";
    }
    window.closeModal = function(id) {
      document.getElementById(id).style.display = "none";
    }

    // --------------------------
    // ✅ 헤더 UI 업데이트 헬퍼 (수정된/추가된 핵심 부분)
    // --------------------------
    function updateHeader(user) {
      const userNameEl = document.getElementById("userName");
      const loginBtn = document.querySelector(".auth-buttons a[onclick*='loginModal']");
      const signupBtn = document.querySelector(".auth-buttons a[onclick*='signupModal']");
      const logoutBtn = document.getElementById("logoutBtn");

      if (user) {
        if (loginBtn) loginBtn.style.display = "none";
        if (signupBtn) signupBtn.style.display = "none";
        if (logoutBtn) logoutBtn.style.display = "inline-block";

        if (userNameEl) {
          // displayName 우선, 없으면 이메일, 그래도 없으면 기본 텍스트
          const name = user.displayName || user.email || "사용자";
          userNameEl.textContent = name;
          userNameEl.style.display = "inline-block";
        }
      } else {
        if (loginBtn) loginBtn.style.display = "inline-block";
        if (signupBtn) signupBtn.style.display = "inline-block";
        if (logoutBtn) logoutBtn.style.display = "none";

        if (userNameEl) {
          userNameEl.textContent = "";
          userNameEl.style.display = "none";
        }
      }
    }
    // --------------------------
    // (끝) 헤더 업데이트 헬퍼
    // --------------------------

    // 회원가입
    document.getElementById("signupSubmit").addEventListener("click", async () => {
      const nickname = document.getElementById("signupNickname").value;
      const email = document.getElementById("signupEmail").value;
      const pass = document.getElementById("signupPass").value;
      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, pass);
        await updateProfile(userCredential.user, { displayName: nickname });
        // 즉시 헤더에 반영되도록 업데이트 호출
        updateHeader(userCredential.user);
        alert("회원가입 완료!");
        closeModal("signupModal");
      } catch (error) {
        alert("회원가입 실패: " + error.message);
      }
    });

    // 로그인
    document.getElementById("loginSubmit").addEventListener("click", async () => {
      const email = document.getElementById("loginEmail").value;
      const pass = document.getElementById("loginPass").value;
      try {
        // 반환값을 받아 즉시 UI 업데이트
        const userCredential = await signInWithEmailAndPassword(auth, email, pass);
        updateHeader(userCredential.user);
        alert("로그인 성공!");
        closeModal("loginModal");
      } catch (error) {
        alert("로그인 실패: " + error.message);
      }
    });

    // 로그아웃
    document.getElementById("logoutBtn").addEventListener("click", async () => {
      await signOut(auth);
      // onAuthStateChanged로도 처리되지만 안전하게 한 번 더
      updateHeader(null);
    });

    // 로그인 상태 유지 (다른 HTML에서도 공유됨)
    onAuthStateChanged(auth, (user) => {
      // onAuthStateChanged에서 헤더 업데이트는 updateHeader로 위임
      updateHeader(user);
    });
  </script>

  <script>
    // 슬라이더
    let index = 0;
    const slides = document.querySelector(".slides");
    const dots = document.querySelectorAll(".dot");

    function showSlide(n) {
      index = n;
      slides.style.transform = `translateX(${-n * 100}%)`;
      dots.forEach(dot => dot.classList.remove("active"));
      dots[n].classList.add("active");
    }

    function autoSlide() {
      index = (index + 1) % 3;
      showSlide(index);
    }

    dots.forEach((dot, i) => {
      dot.addEventListener("click", () => showSlide(i));
    });

    setInterval(autoSlide, 4000);
  </script>

  <!-- 사이트 푸터 -->
  <footer style="background:#111; color:#ccc; font-size:12px; padding:20px; text-align:center; line-height:1.5;">
    <div>
      <a href="#" style="color:#ccc; text-decoration:none; margin:0 4.5px;">이용약관</a> |
      <a href="#" style="color:#ccc; text-decoration:none; margin:0 4.5px;">개인정보 처리방침</a> |
      <a href="#" style="color:#ccc; text-decoration:none; margin:0 4.5px;">유피드 자산 데이터 서버 지침</a> |
      <a href="#" style="color:#ccc; text-decoration:none; margin:0 4.5px;">밴블리온 운영부 고지 사항</a> |
      <a href="#" style="color:#ccc; text-decoration:none; margin:0 4.5px;">커뮤니티 가이드라인</a>
    </div>
    <div style="margin-top:9px;">
      유피드는 밴블리온 사 프로그램 개발 부서 "에너자이저"의 공식 인트라넷 플랫폼으로, 모든 사이트 내 정보는 사이트 자산사의 목적에 한해 제한되고 관리될 수 있습니다.
    </div>
    <div style="margin-top:9px;">
      경기도 수원시 밴블리온 수원 지부 미공개 위치<br>
      help@upid.org | 오픈 소스 라이선스<br>
      ©UPID Foundation.
    </div>
  </footer>

  <link rel="icon" type="image/png" href="favicon.png">
</body>
</html>
